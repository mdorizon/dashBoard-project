<div class="board">

  <div class="board-header">
    <div class="board-header-title-container">
      <h1 class="title-icon">
        {{ board.icon }}
      </h1>
      <h1 class="title-text" contenteditable="true">
        {{ board.name }}
      </h1>
    </div>

    <div class="board-control-bar">
      <div>
        
        <span class="board-title-text">
          Tableau des mises à jour
        </span>
      </div>
    </div>

  </div>

  <!-- <div contenteditable="false" data-content-editable-void="true" style="min-height: 40px; padding-left: 96px; padding-right: 96px; flex-shrink: 0; position: sticky; z-index: 86; left: 0px;">
    <div data-block-id="0a5e3952-50e0-49c4-bdab-3523cdc03e3d" class="notion-selectable notion-collection_view_page-block">
      <div style="display: flex; align-items: center; height: 40px; left: 96px; width: 100%; box-shadow: rgb(233, 233, 231) 0px -1px 0px inset;">
        <div role="tablist" style="display: flex; align-items: center; height: 100%; flex-grow: 1;">
          <div role="button" tabindex="0" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; flex-shrink: 0; white-space: nowrap; height: 28px; border-radius: 4px; font-size: 14px; line-height: 1.2; min-width: 0px; padding-left: 8px; color: rgb(55, 53, 47); font-weight: 600; max-width: 220px;">
            <div style="width: 16px; height: 16px; transform: scale(1.2); mask: url(&quot;/icons/skip-forward_gray.svg?mode=light&quot;) center center no-repeat; background-color: rgb(55, 53, 47); fill: rgb(55, 53, 47); margin-right: 6px;">
            </div>
            <span style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 6px; margin-top: 1px;">
              Tableau des mises à jour
            </span>

          </div>
        </div>
        <div style="display: flex; align-items: center; gap: 2px; opacity: 1;">
          <div role="button" tabindex="0" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; flex-shrink: 0; white-space: nowrap; height: 28px; border-radius: 4px; font-size: 14px; line-height: 1; min-width: 0px; padding: 6px; color: rgba(55, 53, 47, 0.65); font-weight: 400;">
            Filtrer
          </div>
          <div role="button" tabindex="0" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; flex-shrink: 0; white-space: nowrap; height: 28px; border-radius: 4px; font-size: 14px; line-height: 1; min-width: 0px; padding: 6px; color: rgb(35, 131, 226); font-weight: 400;">
            Trier
          </div>
          <div role="button" tabindex="0" class="notion-collection-automation-edit-view" aria-label="Créer et afficher des automatisations" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 4px; height: 28px; width: 28px; padding: 6px; font-size: 14px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); font-weight: 400; line-height: 1;">

          </div>
          <div role="button" tabindex="0" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 4px; height: 28px; width: 28px; padding: 6px; font-size: 14px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); font-weight: 400; line-height: 1;">

          </div>
          <div>
            <div role="button" tabindex="0" class="notion-collection-edit-view" aria-label="Modifier le groupement, la disposition des vues, etc." style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 4px; height: 28px; width: 28px; padding: 6px; font-size: 14px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); font-weight: 400; line-height: 1;">

            </div>
          </div>
          <div class="notion-collection-view-item-add" style="position: relative; display: inline-flex; flex-shrink: 0; border-radius: 4px; overflow: hidden; height: 28px; margin-left: 8px; font-size: 14px;">
            <div role="button" tabindex="0" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; justify-content: center; white-space: nowrap; border-top-left-radius: 4px; border-bottom-left-radius: 4px; padding-left: 8px; padding-right: 8px; font-weight: 500; background: rgb(35, 131, 226); color: white;">
              Nouveau
            </div>
            <div role="button" tabindex="0" style="user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 24px; align-self: stretch; border-top-right-radius: 4px; border-bottom-right-radius: 4px; background: rgb(35, 131, 226); color: white; box-shadow: rgba(55, 53, 47, 0.16) 1px 0px 0px inset;">
              <svg role="graphics-symbol" viewBox="0 0 30 30" class="chevronDown" style="width: 10px; height: 100%; display: block; fill: white; flex-shrink: 0; margin-top: 2px;"><polygon points="15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "></polygon>
              </svg>
            </div>
            <div style="position: absolute; pointer-events: none; border-radius: 4px; inset: 0px; box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset, rgba(15, 15, 15, 0.1) 0px 1px 2px;">
            </div></div></div></div></div><div style="left: 96px; width: 100%;">
            </div>
          </div> -->

  <div class="board-wrapper">
    <div class="board-columns" cdkDropListGroup>
      <div #columnElement class="board-column" *ngFor="let column of board.columns; let columnIndex = index" [ngStyle]="{'background-color': 'var(--color-' + column.color + '-light)'}">
        <div class="drop-list" *ngFor="let task of column.tasks" cdkDropList [cdkDropListData]="task.content" (cdkDropListDropped)="drop($event)">
          <div class="column-head">
            <div class="column-title-left-content">
              <span class="column-title">
                <div class="column-title-content" [ngStyle]="{'background-color': 'var(--color-' + column.color + '-tag)', 'color': 'var(--color-' + column.color + '-text)'}">
                    <div class="column-title-dot" [ngStyle]="{'background-color': 'var(--color-' + column.color + '-dark)'}"></div>
                    <span class="column-title-text" [ngStyle]="{'color': 'var(--color-' + column.color + '-text)'}">{{ column.name }}</span>
                </div>
              </span>
              <div *ngFor="let task of column.tasks" class="column-tasks-counter" [ngStyle]="{'color': 'var(--color-' + column.color + '-dark)'}">
                {{ task.content.length }}
              </div>
            </div>
            <div class="column-title-right-content">
              <div class="column-title-hover-content">
                <div class="column-settings-task-button">
                  <i class="material-icons" [ngStyle]="{'color': 'var(--color-' + column.color + '-dark)'}" >more_horiz</i>
                </div>
                <div class="column-add-task-button">
                  <i class="material-icons" [ngStyle]="{'color': 'var(--color-' + column.color + '-dark)'}" >add</i>
                </div>
              </div>
            </div>
          </div>
  
          <div class="tasks-container" *ngFor="let task of column.tasks">
            <div class="task" *ngFor="let content of task.content; let taskId = index" cdkDrag #taskElement>
              <div class="dragging-placeholder" *cdkDragPlaceholder></div>
              <div class="tasks-content">
                <!-- <div (click)="emoTest(taskId, columnIndex)" class="tasks-content-icon"> -->
                  <p>{{ content.icon }}</p>
                <!-- </div> -->
                <div class="tasks-content-text">
                  {{ content.text }}
                </div>
                <form class="tasks-content-form hidden" (ngSubmit)="onFormSubmit($event, form, taskId, columnIndex)" #form="ngForm">
                  <input #formInput ngModel #todoTextField="ngModel" required minlength="2" name="text" class="input tasks-content-input" type="text" [(ngModel)]="formValue">
                </form>
                <div class="tasks-content-buttons">
                  <div class="task-edit-button" (click)="onEditClicked($event, taskId, columnIndex)">
                    <i class="material-icons">edit</i>
                  </div>
                  <div class="task-settings-button">
                    <i class="material-icons">more_horiz</i>
                  </div>
                </div>
                
              </div>
              <!-- <emoji-mart class="emoji-picker" (emojiClick)="addEmoji($event)" [style]="{ 'z-index': '1000', position: 'absolute', bottom: '20px', right: '20px' }" [i18n]="{ search: 'Recherche', categories: { search: 'Résultats de recherche', recent: 'Récents' } }"></emoji-mart> -->
            </div>
          </div>
        </div>

        <div class="new-task-button">
          <i class="material-icons" [ngStyle]="{'color': 'var(--color-' + column.color + '-dark)', 'font-size': '21px'}" >add</i>
          <p [ngStyle]="{'color': 'var(--color-' + column.color + '-dark)'}">Nouveau</p>
        </div>
      </div>
    </div>
  </div>
</div>